{% extends 'base.html.twig' %}

{% block title %}Editar {{ film.title }} - CineProyecto{% endblock %}

{% block body %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <!-- Botón volver -->
            <a href="{{ path('film_show', {'id': film.id}) }}" class="btn btn-outline-secondary mb-4">
                <i class="bi bi-arrow-left me-2"></i> Volver a detalles
            </a>
            
            <!-- Card del formulario -->
            <div class="card shadow">
                <div class="card-header bg-warning text-dark">
                    <h4 class="mb-0">
                        <i class="bi bi-pencil me-2"></i> Editar Película: {{ film.title }}
                    </h4>
                </div>
                <div class="card-body">
                    <!-- FORMULARIO DE EDICIÓN -->
                    <form method="post" action="{{ path('film_edit', {'id': film.id}) }}">
                        <div class="mb-3">
                            <label for="title" class="form-label fw-bold">
                                <i class="bi bi-card-text me-1"></i> Título *
                            </label>
                            <input type="text" class="form-control" id="title" name="title" 
                                   value="{{ film.title }}" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="description" class="form-label fw-bold">
                                <i class="bi bi-text-paragraph me-1"></i> Descripción
                            </label>
                            <textarea class="form-control" id="description" name="description" 
                                      rows="4">{{ film.description }}</textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="releaseYear" class="form-label fw-bold">
                                    <i class="bi bi-calendar3 me-1"></i> Año de lanzamiento *
                                </label>
                                <input type="number" class="form-control" id="releaseYear" 
                                       name="releaseYear" min="1901" max="2155" 
                                       value="{{ film.releaseYear }}" required>
                                <small class="text-muted">Entre 1901 y 2155</small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="length" class="form-label fw-bold">
                                    <i class="bi bi-clock me-1"></i> Duración (minutos) *
                                </label>
                                <input type="number" class="form-control" id="length" 
                                       name="length" min="1" max="300" 
                                       value="{{ film.length }}" required>
                                <small class="text-muted">Entre 1 y 300 minutos</small>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="rating" class="form-label fw-bold">
                                    <i class="bi bi-star me-1"></i> Clasificación *
                                </label>
                                <select class="form-select" id="rating" name="rating" required>
                                    <option value="G" {% if film.rating == 'G' %}selected{% endif %}>G - General</option>
                                    <option value="PG" {% if film.rating == 'PG' %}selected{% endif %}>PG - Guía Parental</option>
                                    <option value="PG-13" {% if film.rating == 'PG-13' %}selected{% endif %}>PG-13 - Mayores de 13</option>
                                    <option value="R" {% if film.rating == 'R' %}selected{% endif %}>R - Restringido</option>
                                    <option value="NC-17" {% if film.rating == 'NC-17' %}selected{% endif %}>NC-17 - Adultos</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="rentalRate" class="form-label fw-bold">
                                    <i class="bi bi-currency-dollar me-1"></i> Precio de alquiler *
                                </label>
                                <input type="number" step="0.01" class="form-control" id="rentalRate" 
                                       name="rentalRate" min="0.99" max="10.00" 
                                       value="{{ film.rentalRate }}" required>
                                <small class="text-muted">Entre $0.99 y $10.00</small>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between mt-4">
                            <a href="{{ path('film_show', {'id': film.id}) }}" 
                               class="btn btn-outline-secondary">
                                <i class="bi bi-x-circle me-1"></i> Cancelar
                            </a>
                            <button type="submit" class="btn btn-warning">
                                <i class="bi bi-save me-1"></i> Guardar Cambios
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Información adicional -->
            <div class="alert alert-info mt-4">
                <i class="bi bi-info-circle me-2"></i>
                <strong>ID:</strong> {{ film.id }} | 
                <strong>Última actualización:</strong> Ahora
            </div>
        </div>
    </div>
</div>
{% endblock %}