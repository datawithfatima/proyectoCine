{% extends 'base.html.twig' %}

{% block title %}Registrar devolución{% endblock %}

{% block body %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0">
        <i class="bi bi-arrow-return-left text-warning"></i>
        Registrar devolución
    </h2>
    <a href="{{ path('rental_show', {id: rental.id}) }}" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> Volver
    </a>
</div>

<div class="mb-3">
    <strong>Cliente:</strong> {{ rental.customer.fullName }} <br>
    <strong>Película:</strong> {{ rental.inventory.film.title }} <br>
    <strong>Fecha alquiler:</strong> {{ rental.rentalDate|date('Y-m-d H:i') }}
</div>

{% if lateDays is not null %}
    <div class="alert {{ lateDays > 0 ? 'alert-danger' : 'alert-success' }}">
        {% if lateDays > 0 %}
            El cliente tiene un retraso de <strong>{{ lateDays }}</strong> día(s).
            (Plazo permitido: {{ allowedDays }} día(s)).
        {% else %}
            La devolución está dentro del plazo ({{ allowedDays }} día(s)).
        {% endif %}
    </div>
{% endif %}

<div class="card shadow-sm border-0">
    <div class="card-body">
        {{ form_start(form) }}
            {{ form_row(form.returnDate) }}

            <div class="mt-3 d-flex justify-content-end gap-2">
                <button class="btn btn-primary">
                    <i class="bi bi-save"></i> Guardar devolución
                </button>
            </div>
        {{ form_end(form) }}
    </div>
</div>
{% endblock %}
